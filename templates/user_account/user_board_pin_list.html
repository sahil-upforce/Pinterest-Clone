{% extends 'base.html' %}
{% load static %}
{% block title %}Pinterest | Board Pins{% endblock %}
{% block content %}
<section class="mt-4 mb-5">
	<div class="container mb-4">
		<h1 class="font-weight-bold title">Board is {{ board_obj.name }}</h1>
		{% if board_obj.user == user %}
		<div class="container mt-5 mb-5 p-5">
			<div class="d-flex justify-content-center">
				<div class="input-group w-auto">
					<form class="form-inline" method="post" action="{% url 'users:board_pins' username=user.username board_name=board_obj.name %}">
						{% csrf_token %}
						<input type="text" placeholder="Enter Board Name..." class="form-control mr-2" name="name" value="{{ board_obj.name }}" required>
						<input type="checkbox" name="is_private" id="is_private" class="form-control mr-2" {{ board_obj.is_private|yesno:"checked,'',''" }}><label for="is_private"> Make Private</label>
						<input type="submit" value="Update Board" class="form-control btn btn-primary ml-2">
					</form>
				</div>
			</div>
		</div>
		{% endif %}
		{% if not board_obj.pin.all %}
		<hr>
		<h5 class="font-weight-bold title mb-5">Board is Empty..!</h5>
		{% endif %}
	</div>
	<div class="container-fluid">
		<div class="row">
			<div class="card-columns">
				{% for pin in pins %}
				<a href="{% url 'pins:detail_pin' pin.id %}" style="color: white;">
					<div class="card card-pin">
						<img class="card-img" src="{{ pin.pin_file.url }}" alt="Card image">
						<div class="card-title centered">{{ pin.title }}</div>
						{% if pin.is_saved %}
						<div class="bottom-right"><a href="{% url 'pins:save_unsave_pin' pin.id %}"
								style="color: white;"><i class="fa fa-bookmark" style="font-size:24px"></i></a></div>
						{% else %}
						<div class="bottom-right"><a href="{% url 'pins:save_unsave_pin' pin.id %}"
								style="color: white;"><i class="fa fa-bookmark-o" style="font-size:24px"></i></a></div>
						{% endif %}
						{% if board_obj.user == user %}
						<div class="top-right"><a href="{% url 'pins:remove_pin_from_board' board_id=board_obj.id pin_id=pin.id %}"
								style="color: white;"><i class="fa fa-trash-o" style="font-size:24px"></i></a></div>
						{% else %}
						<div class="top-right">
							<div class="show"><i class="fa fa-star" style="font-size:24px; color: white;"></i>
								<ul class="list-categories shadow-lg">
									<li>Add To Board</li>
									{% for board in user.boards.all %}
								  	<li><a href="{% url 'pins:pin_add_to_board' board_id=board.id pin_id=pin.id %}" style="text-decoration:none;">{{ board.name }}</a></li>
									{% endfor %}
									<form method="post" class="mt-2" action="{% url 'users:user_profile' user.id %}">
										{% csrf_token %}
										<input class="form-control" name="name" type="text" required=True placeholder="Create Board....">
									</form>
								</ul>
							</div>
						</div>
						{% endif %}
						<div class="bottom-left">
							{% if pin.user.user_profile.profile_picture %}
							<a href="{% url 'users:user_profile' pin.user.id %}" style="color: white;"><img
									class="rounded-circle mr-2" src="{{ pin.user.user_profile.profile_picture.url }}"
									width="40" height="40"><span class="align-middle">{{pin.user.username}}</span></a>
							{% else %}
							<a href="{% url 'users:user_profile' pin.user.id %}" style="color: white;"><img
									class="rounded-circle mr-2" src="{% static 'img/av.png' %}" width="40"
									height="40"><span class="align-middle">{{pin.user.username}}</span></a>
							{% endif %}
						</div>
					</div>
				</a>
				{% endfor %}
			</div>
		</div>
	</div>
</section>
{% endblock %}