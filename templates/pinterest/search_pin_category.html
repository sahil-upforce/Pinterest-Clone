{% extends 'base.html' %}
{% load static %}
{% block title %}Pinterest | Today{% endblock %}
{% block content %}
<section class="mt-4 mb-5">
	<div class="container mb-4">
		<h1 class="font-weight-bold title mb-5">Pins</h1>
		{% if not data %}
		<hr>
		<h5 class="font-weight-bold title mb-5">Pins not found with {{ request.GET.search_input }} Category</h5>
		{% endif %}
	</div>
	{% if data %}
	<div class="container-fluid mt-5">
	<div class="row">
		<div class="card-columns">
			{% for pin in data %}
				<a href="{% url 'pins:detail_pin' pin.id %}" style="color: white;">
					<div class="card card-pin">
					<img class="card-img"
						src="{{ pin.pin_file.url }}"
						alt="Card image">
						<div class="card-title centered">{{ pin.title }}</div>
						{% if pin.is_saved %}
						<div class="bottom-right"><a href="{% url 'pins:save_unsave_pin' pin.id %}" style="color: white;"><i class="fa fa-bookmark" style="font-size:24px"></i></a></div>
						{% else %}
						<div class="bottom-right"><a href="{% url 'pins:save_unsave_pin' pin.id %}" style="color: white;"><i class="fa fa-bookmark-o" style="font-size:24px"></i></a></div>
						{% endif %}
						<div class="top-right">
							<div class="show"><i class="fa fa-star" style="font-size:24px; color: white;"></i>
								<ul class="list-categories shadow-lg">
									<li>Add To Board</li>
									{% for board in user.boards.all %}
								  	<li><a href="{% url 'pins:pin_add_to_board' board_id=board.id pin_id=pin.id %}" style="text-decoration:none;">{{ board.name }}</a></li>
									{% endfor %}
									<form method="post" class="mt-2" action="{% url 'users:user_profile' user.id %}">
										{% csrf_token %}
										<input class="form-control" name="name" type="text" required=True placeholder="Create Board....">
									</form>
								</ul>
							</div>
						</div>
						<div class="bottom-left">
							{% if pin.user.user_profile.profile_picture %}
							<a href="{% url 'users:user_profile' pin.user.id %}" style="color: white;"><img class="rounded-circle mr-2"
						src="{{ pin.user.user_profile.profile_picture.url }}" width="40" height="40"><span class="align-middle">{{pin.user.username}}</span></a>
							{% else %}
							<a href="{% url 'users:user_profile' pin.user.id %}" style="color: white;"><img class="rounded-circle mr-2"
						src="{% static 'img/av.png' %}" width="40" height="40"><span class="align-middle">{{pin.user.username}}</span></a>
							{% endif %}
						</div>
					</div>
				</a>
			{% endfor %}
		</div>
	</div>
</div>
	{% endif %}
</section>
{% endblock %}